import React, { useState, useEffect, useRef } from 'react';
import {
  Box,
  Container,
  Grid,
  Typography,
  Avatar,
  Button,
  Chip,
  Tabs,
  Tab,
  Card,
  CardContent,
  CardMedia,
  IconButton,
  Divider,
  Paper,
  styled,
  useTheme,
  useMediaQuery,
  List,
  ListItem,
  ListItemText,
  ListItemIcon
} from '@mui/material';
import {
  Edit as EditIcon,
  PlayArrow as PlayArrowIcon,
  Pause as PauseIcon,
  VolumeOff as VolumeOffIcon,
  VolumeUp as VolumeOnIcon,
  Favorite as FavoriteIcon,
  Share as ShareIcon,
  Bookmark as BookmarkIcon,
  Work as WorkIcon,
  Business as BusinessIcon,
  LocationOn as LocationIcon,
  Email as EmailIcon,
  Phone as PhoneIcon,
  Language as LanguageIcon,
  LinkedIn as LinkedInIcon,
  Facebook as FacebookIcon,
  Twitter as TwitterIcon,
  People as PeopleIcon,
  Description as DescriptionIcon
} from '@mui/icons-material';
import { useNavigate, useParams } from 'react-router-dom';
import { getEmployerProfile, getVideoResume, getEmployerJobs , getJobVideos } from '../services/api';

// Styled components
const ProfileContainer = styled(Box)(({ theme }) => ({
  backgroundColor: theme.palette.background.default,
  minHeight: '100vh',
  paddingTop: theme.spacing(2),
  paddingBottom: theme.spacing(4)
}));

const ProfileHeader = styled(Box)(({ theme }) => ({
  position: 'relative',
  marginBottom: theme.spacing(3),
  display: 'flex',
  flexDirection: 'column',
  [theme.breakpoints.up('md')]: {
    flexDirection: 'row',
  }
}));

const ProfileInfo = styled(Box)(({ theme }) => ({
  flex: 1,
  padding: theme.spacing(2),
  [theme.breakpoints.up('md')]: {
    paddingRight: theme.spacing(4),
  }
}));

const MainVideoContainer = styled(Box)(({ theme }) => ({
  width: '100%',
  height: 250,
  borderRadius: theme.spacing(1),
  overflow: 'hidden',
  position: 'relative',
  marginBottom: theme.spacing(2),
  backgroundColor: '#000',
  [theme.breakpoints.up('md')]: {
    width: 300,
    height: 400,
    marginBottom: 0,
  }
}));

const VideoControls = styled(Box)(({ theme }) => ({
  position: 'absolute',
  bottom: 0,
  left: 0,
  right: 0,
  padding: theme.spacing(1),
  backgroundColor: 'rgba(0, 0, 0, 0.5)',
  display: 'flex',
  alignItems: 'center',
  justifyContent: 'space-between',
}));

const VideoActions = styled(Box)(({ theme }) => ({
  position: 'absolute',
  right: theme.spacing(1),
  top: '50%',
  transform: 'translateY(-50%)',
  display: 'flex',
  flexDirection: 'column',
  alignItems: 'center',
  gap: theme.spacing(2),
}));

const CompanyLogo = styled(Avatar)(({ theme }) => ({
  width: 100,
  height: 100,
  border: `4px solid ${theme.palette.primary.main}`,
  marginRight: theme.spacing(2),
}));

const CategoryChip = styled(Chip)(({ theme }) => ({
  margin: theme.spacing(0.5),
  backgroundColor: theme.palette.secondary.light,
  color: theme.palette.secondary.contrastText,
  '&:hover': {
    backgroundColor: theme.palette.secondary.main,
  }
}));

const TabPanel = (props) => {
  const { children, value, index, ...other } = props;
  return (
    <div
      role="tabpanel"
      hidden={value !== index}
      id={`profile-tabpanel-${index}`}
      aria-labelledby={`profile-tab-${index}`}
      {...other}
    >
      {value === index && (
        <Box sx={{ p: 3 }}>
          {children}
        </Box>
      )}
    </div>
  );
};

const VideoCard = styled(Card)(({ theme }) => ({
  height: '100%',
  display: 'flex',
  flexDirection: 'column',
  borderRadius: theme.spacing(1),
  overflow: 'hidden',
  transition: 'transform 0.3s ease',
  '&:hover': {
    transform: 'translateY(-50%, -50%)',
    boxShadow: theme.shadows[10],
  }
}));

const VideoCardMedia = styled(CardMedia)(({ theme }) => ({
  height: 0,
  paddingTop: '56.25%', // 16:9 aspect ratio
  position: 'relative',
}));

const VideoPlayButton = styled(IconButton)(({ theme }) => ({
  position: 'absolute',
  top: '50%',
  left: '50%',
  transform: 'translate(-50%, -50%)',
  backgroundColor: 'rgba(0, 0, 0, 0.5)',
  color: '#fff',
  '&:hover': {
    backgroundColor: 'rgba(0, 0, 0, 0.7)',
  }
}));

const JobCard = styled(Card)(({ theme }) => ({
  marginBottom: theme.spacing(2),
  borderLeft: `4px solid ${theme.palette.primary.main}`,
}));

const EmployerProfile = () => {
  const theme = useTheme();
  const navigate = useNavigate();
  const { id } = useParams();
  const isMobile = useMediaQuery(theme.breakpoints.down('md'));
  
  // State
  const [tabValue, setTabValue] = useState(0);
  const [profile, setProfile] = useState(null);
  const [videos, setVideos] = useState([]);
  const [jobs, setJobs] = useState([]);
  const [jobVideos, setJobVideos] = useState({});
  const [loading, setLoading] = useState(true);

  const handleTabChange = (event, newValue) => {
  setTabValue(newValue);
};
  
  // Refs for video controls
  const mainVideoRef = useRef(null);
  const videoRefs = useRef({});
  
  // State for video playback
  const [playingVideos, setPlayingVideos] = useState({});
  const [mutedVideos, setMutedVideos] = useState({});
  
  // Fetch employer data
  useEffect(() => {
    const fetchEmployerData = async () => {
      try {
        setLoading(true);
        
        // Fetch profile data
        const profileResponse = await getEmployerProfile();
        setProfile(profileResponse.data.company);
          console.log('Employer profile data::::::', profileResponse.data.company);

        
        // Fetch videos
        const videosResponse = await getVideoResume({ page: 1, limit: 10 });
        setVideos(videosResponse.data?.videos || []);
        
        // Fetch jobs
        const jobsResponse = await getEmployerJobs(id);
        setJobs(jobsResponse.data?.jobs || []);
        
        // Fetch job videos for each job
        if (jobsResponse.data?.jobs) {
          const jobVideosPromises = jobsResponse.data.jobs.map(async (job) => {
            try {
              const jobVideosResponse = await getJobVideos(job.id);
              // const jobVideosResponse = await jobVideosResponse.json();
              console.log(`Job videos for job ${job.id}:`, jobVideosResponse.data);
              if (jobVideosResponse.success) {
                return { jobId: job.id, videos: jobVideosResponse.data.videos };
              }
            } catch (error) {
              console.error(`Error fetching videos for job ${job.id}:`, error);
              return { jobId: job.id, videos: [] };
            }
            return { jobId: job.id, videos: [] };
          });
          
          const jobVideosResults = await Promise.all(jobVideosPromises);
          const jobVideosMap = {};
          
          jobVideosResults.forEach(({ jobId, videos }) => {
            jobVideosMap[jobId] = videos;
          });
          
          setJobVideos(jobVideosMap);
        }
        
        setLoading(false);
      } catch (error) {
        console.error('Error fetching employer data:', error);
        setLoading(false);
      }
    };
    
    fetchEmployerData();
  },[]);
  
  // Toggle video playback for specific video
  const togglePlayback = (videoId, isMainVideo = false) => {
    if (isMainVideo) {
      if (mainVideoRef.current) {
        if (mainVideoRef.current.paused) {
          mainVideoRef.current.play();
        } else {
          mainVideoRef.current.pause();
        }
        
        setPlayingVideos(prevState => ({
          ...prevState,
          main: !prevState.main
        }));
      }
    } else {
      if (videoRefs.current[videoId]) {
        const videoElement = videoRefs.current[videoId];
        
        if (videoElement.paused) {
          videoElement.play();
        } else {
          videoElement.pause();
        }
        
        setPlayingVideos(prevState => ({
          ...prevState,
          [videoId]: !prevState[videoId]
        }));
      }
    }
  };
  
  // Handle mute/unmute for specific video
  const toggleMute = (videoId, isMainVideo = false) => {
    if (isMainVideo) {
      if (mainVideoRef.current) {
        mainVideoRef.current.muted = !mainVideoRef.current.muted;
        
        setMutedVideos(prevState => ({
          ...prevState,
          main: mainVideoRef.current.muted
        }));
      }
    } else {
      if (videoRefs.current[videoId]) {
        const videoElement = videoRefs.current[videoId];
        videoElement.muted = !videoElement.muted;
        
        setMutedVideos(prevState => ({
          ...prevState,
          [videoId]: videoElement.muted
        }));
      }
    }
  };
  
  // Navigate to edit profile
  const handleEditProfile = () => {
    navigate(`/employer/edit/${id}`);
  };
  
  // Navigate to post job
  const handlePostJob = () => {
    navigate('/employer/post-job');
  };
  
  // Navigate to edit video page
  const handleEditVideo = (videoId) => {
    navigate(`/employer/videos/edit/${videoId}`);
  };

  // Format date (YYYY-MM-DD to readable format)
  const formatDate = (dateString) => {
    if (!dateString) return '';
    const date = new Date(dateString);
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    return date.toLocaleDateString('en-US', options);
  };
  
  // Format duration (seconds to MM:SS)
  const formatDuration = (seconds) => {
    if (!seconds) return "0:00";
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  };
  
  // Find main video from videos array
  const getMainVideo = () => {
    return videos.find(video => video.video_position === 'main') || videos[0];
  };
  
  // Render video card with controls
  const renderVideoCard = (video, isJobVideo = false, jobId = null) => {
    const isMain = video.id === getMainVideo()?.id;
    
    return (
      <Grid item xs={12} sm={6} md={4} key={video.id}>
        <VideoCard>
          <Box sx={{ position: 'relative' }}>
            <video
              ref={(el) => videoRefs.current[video.id] = el}
              src={video.video_url}
              style={{
                width: '100%',
                height: 'auto',
                maxHeight: 250,
                objectFit: 'cover'
              }}
              poster={video.thumbnail}
              muted={mutedVideos[video.id]}
            />
            
            {/* Overlay play button */}
            <Box
              sx={{
                position: 'absolute',
                top: '50%',
                left: '50%',
                transform: 'translate(-50%, -50%)',
                pointerEvents: 'none',
                opacity: playingVideos[video.id] ? 0 : 0.8
              }}
            >
              <PlayArrowIcon sx={{ fontSize: 40 }} />
            </Box>
            
            {/* Video controls overlay */}
            <Box
              sx={{
                position: 'absolute',
                bottom: 0,
                left: 0,
                right: 0,
                background: 'linear-gradient(to top, rgba(0,0,0,0.7), transparent)',
                padding: 1,
                display: 'flex',
                justifyContent: 'space-between',
                alignItems: 'center'
              }}
            >
              <Box sx={{ display: 'flex', gap: 1 }}>
                <IconButton 
                  size="small" 
                  color="inherit"
                  onClick={() => togglePlayback(video.id)}
                >
                  {playingVideos[video.id] ? <PauseIcon /> : <PlayArrowIcon />}
                </IconButton>
                <Typography variant="caption" color="white">
                  {formatDuration(video.duration || 0)}
                </Typography>
              </Box>
              
              <IconButton 
                size="small" 
                color="inherit"
                onClick={() => toggleMute(video.id)}
                sx={{ mr: 1 }}
              >
                {mutedVideos[video.id] ? <VolumeOffIcon /> : <VolumeOnIcon />}
              </IconButton>
            </Box>
            
            {/* Edit icon for videos */}
            {!isJobVideo && (
              <IconButton
                style={{
                  position: 'absolute',
                  top: '10px',
                  right: '10px',
                  backgroundColor: 'rgba(0, 0, 0, 0.5)',
                  color: '#fff'
                }}
                onClick={() => handleEditVideo(video.id)}
              >
                <EditIcon />
              </IconButton>
            )}
          </Box>
          
          <CardContent>
            <Typography variant="subtitle1" component="h3" gutterBottom>
              {video.video_title || 'Untitled Video'}
            </Typography>
            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
              <Typography variant="caption" color="textSecondary">
                {video.video_type || 'video'}
              </Typography>
              <Typography variant="caption" color="textSecondary">
                {video.views || 0} views
              </Typography>
            </Box>
          </CardContent>
        </VideoCard>
      </Grid>
    );
  };

  return (
    <ProfileContainer>
      <Container maxWidth="lg">
        {/* Profile Header */}
        <ProfileHeader>
          <ProfileInfo>
            <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>
              <CompanyLogo src={profile?.logo} alt={profile?.name} />
              <Box>
                <Typography variant="h4" component="h1" gutterBottom>
                  {profile?.name}
                </Typography>
                <Typography variant="h6" color="textSecondary">
                  {profile?.industry}
                </Typography>
                <Box sx={{ display: 'flex', alignItems: 'center', mt: 0.5 }}>
                  <LocationIcon fontSize="small" color="action" />
                  <Typography variant="body2" color="textSecondary" sx={{ ml: 0.5 }}>
                    {profile?.location}
                  </Typography>
                </Box>
              </Box>
            </Box>
            <Box sx={{ display: 'flex', gap: 2, mb: 2 }}>
              <Button
                variant="contained"
                color="primary"
                startIcon={<EditIcon />}
                onClick={handleEditProfile}
              >
                Edit Profile
              </Button>
              <Button
                variant="outlined"
                color="primary"
                startIcon={<WorkIcon />}
                onClick={handlePostJob}
              >
                Post Job
              </Button>
            </Box>
            <Typography variant="body1" paragraph>
              {profile?.description}
            </Typography>
            <Box sx={{ mb: 2 }}>
              <Typography variant="subtitle1" gutterBottom fontWeight="bold">
                Categories
              </Typography>
              <Box sx={{ display: 'flex', flexWrap: 'wrap' }}>
                {profile?.categories?.map((category, index) => (
                  <CategoryChip key={index} label={category.name} />
                ))}
              </Box>
            </Box>
            <Grid container spacing={2} sx={{ mb: 2 }}>
              <Grid item xs={12} sm={6} md={4}>
                <Box sx={{ display: 'flex', alignItems: 'center' }}>
                  <BusinessIcon fontSize="small" color="action" sx={{ mr: 1 }} />
                  <Typography variant="body2">
                    Founded: {profile?.founded}
                  </Typography>
                </Box>
              </Grid>
              <Grid item xs={12} sm={6} md={4}>
                <Box sx={{ display: 'flex', alignItems: 'center' }}>
                  <PeopleIcon fontSize="small" color="action" sx={{ mr: 1 }} />
                  <Typography variant="body2">
                    Size: {profile?.size}
                  </Typography>
                </Box>
              </Grid>
              <Grid item xs={12} sm={6} md={4}>
                <Box sx={{ display: 'flex', alignItems: 'center' }}>
                  <DescriptionIcon fontSize="small" color="action" sx={{ mr: 1 }} />
                  <Typography variant="body2">
                    {jobs.length} Active Jobs
                  </Typography>
                </Box>
              </Grid>
            </Grid>
            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2 }}>
              <Box sx={{ display: 'flex', alignItems: 'center' }}>
                <EmailIcon fontSize="small" color="action" />
                <Typography variant="body2" sx={{ ml: 0.5 }}>
                  {profile?.email}
                </Typography>
              </Box>
              <Box sx={{ display: 'flex', alignItems: 'center' }}>
                <PhoneIcon fontSize="small" color="action" />
                <Typography variant="body2" sx={{ ml: 0.5 }}>
                  {profile?.phone}
                </Typography>
              </Box>
              <Box sx={{ display: 'flex', alignItems: 'center' }}>
                <LanguageIcon fontSize="small" color="action" />
                <Typography variant="body2" sx={{ ml: 0.5 }}>
                  {profile?.website}
                </Typography>
              </Box>
            </Box>
            <Box sx={{ display: 'flex', mt: 2, gap: 1 }}>
              <IconButton color="primary" aria-label="LinkedIn">
                <LinkedInIcon />
              </IconButton>
              <IconButton color="primary" aria-label="Facebook">
                <FacebookIcon />
              </IconButton>
              <IconButton color="primary" aria-label="Twitter">
                <TwitterIcon />
              </IconButton>
            </Box>
          </ProfileInfo>
          
          {/* Main Video */}
          <MainVideoContainer>
            <video
              ref={mainVideoRef}
              src={getMainVideo()?.video_url}
              width="100%"
              height="100%"
              onEnded={() => setPlayingVideos(prev => ({ ...prev, main: false }))}
              style={{ objectFit: 'cover' }}
              muted={mutedVideos.main}
            />
            <VideoControls>
              <IconButton 
                size="small" 
                color="inherit" 
                onClick={() => togglePlayback('main', true)}
              >
                {playingVideos.main ? <PauseIcon /> : <PlayArrowIcon />}
              </IconButton>
              <Typography variant="caption" color="inherit">
                Company Introduction
              </Typography>
            </VideoControls>
            <VideoActions>
              <IconButton 
                color="inherit"
                onClick={() => toggleMute('main', true)}
              >
                {mutedVideos.main ? <VolumeOffIcon /> : <VolumeOnIcon />}
              </IconButton>
              <IconButton color="inherit">
                <FavoriteIcon />
              </IconButton>
              <IconButton color="inherit">
                <ShareIcon />
              </IconButton>
              <IconButton color="inherit">
                <BookmarkIcon />
              </IconButton>
            </VideoActions>
          </MainVideoContainer>
        </ProfileHeader>
        
        {/* Tabs Section */}
        <Paper sx={{ mb: 3 }}>
          <Tabs
            value={tabValue}
            onChange={handleTabChange}
            indicatorColor="primary"
            textColor="primary"
            variant={isMobile ? "scrollable" : "fullWidth"}
            scrollButtons={isMobile ? "auto" : false}
            centered={!isMobile}
          >
            <Tab label="About" />
            <Tab label="Jobs" />
            <Tab label="Videos" />
            <Tab label="Contact" />
          </Tabs>
          
          {/* About Tab */}
          <TabPanel value={tabValue} index={0}>
            <Grid container spacing={3}>
              <Grid item xs={12} md={6}>
                <Typography variant="h6" gutterBottom>
                  Company Overview
                </Typography>
                <Typography variant="body1" paragraph>
                  {profile?.description}
                </Typography>
                <Typography variant="h6" gutterBottom>
                  Industry
                </Typography>
                <Typography variant="body1" paragraph>
                  {profile?.industry}
                </Typography>
                <Typography variant="h6" gutterBottom>
                  Company Size
                </Typography>
                <Typography variant="body1" paragraph>
                  {profile?.size}
                </Typography>
              </Grid>
              <Grid item xs={12} md={6}>
                <Typography variant="h6" gutterBottom>
                  Founded
                </Typography>
                <Typography variant="body1" paragraph>
                  {profile?.founded}
                </Typography>
                <Typography variant="h6" gutterBottom>
                  Headquarters
                </Typography>
                <Typography variant="body1" paragraph>
                  {profile?.location}
                </Typography>
                <Typography variant="h6" gutterBottom>
                  Categories
                </Typography>
                <Box sx={{ display: 'flex', flexWrap: 'wrap' }}>
                  {profile?.categories?.map((category, index) => (
                    <CategoryChip key={index} label={category.name} />
                  ))}
                </Box>
              </Grid>
            </Grid>
          </TabPanel>
          
          {/* Jobs Tab */}
          <TabPanel value={tabValue} index={1}>
            <Box sx={{ mb: 3, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
              <Typography variant="h6">
                Open Positions
              </Typography>
              <Button
                variant="contained"
                color="primary"
                startIcon={<WorkIcon />}
                onClick={handlePostJob}
              >
                Post New Job
              </Button>
            </Box>
            {jobs.map((job) => (
              <JobCard key={job.id}>
                <CardContent>
                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                    <Box>
                      <Typography variant="h6" component="h3">
                        {job.title}
                      </Typography>
                      <Box sx={{ display: 'flex', alignItems: 'center', mt: 0.5 }}>
                        <LocationIcon fontSize="small" color="action" />
                        <Typography variant="body2" color="textSecondary" sx={{ ml: 0.5 }}>
                          {job.location}
                        </Typography>
                      </Box>
                    </Box>
                    <Box>
                      <Typography variant="body2" color="textSecondary">
                        Posted: {formatDate(job.posted_at)}
                      </Typography>
                      <Typography variant="body2" color="textSecondary">
                        {job.applicants_count || 0} Applicants
                      </Typography>
                    </Box>
                  </Box>
                  
                  <Box sx={{ mt: 2, display: 'flex', gap: 2, flexWrap: 'wrap' }}>
                    <Chip label={job.employment_type} size="small" color="primary" variant="outlined" />
                    <Chip 
                      label={`${job.salary_min || 0} - ${job.salary_max || 0}`} 
                      size="small" 
                      color="secondary" 
                      variant="outlined" 
                    />
                  </Box>
                  
                  <Typography variant="body1" sx={{ mt: 2 }}>
                    {job.description}
                  </Typography>
                  
                  <Typography variant="subtitle1" sx={{ mt: 2 }}>
                    Requirements:
                  </Typography>
                  <List dense>
                    {job.requirements.map((req, index) => (
                      <ListItem key={index}>
                        <ListItemText primary={req} />
                      </ListItem>
                    ))}
                  </List>
                  
                  {/* Job Videos */}
                  {jobVideos[job.id]?.length > 0 && (
                    <>
                      <Typography variant="subtitle1" sx={{ mt: 2 }}>
                        Job Videos:
                      </Typography>
                      <Grid container spacing={2} sx={{ mt: 1 }}>
                        {jobVideos[job.id].map(video => (
                          <Grid item xs={12} sm={6} md={4} key={video.id}>
                            <Box sx={{ position: 'relative' }}>
                              <video
                                ref={(el) => videoRefs.current[video.id] = el}
                                src={video.video_url}
                                style={{
                                  width: '100%',
                                  height: 'auto',
                                  maxHeight: 200,
                                  objectFit: 'cover',
                                  borderRadius: theme.shape.borderRadius
                                }}
                                muted={mutedVideos[video.id]}
                              />
                              
                              {/* Overlay play button */}
                              <Box
                                sx={{
                                  position: 'absolute',
                                  top: '50%',
                                  left: '50%',
                                  transform: 'translate(-50%, -50%)',
                                  pointerEvents: 'none',
                                  opacity: playingVideos[video.id] ? 0 : 0.8
                                }}
                              >
                                <PlayArrowIcon sx={{ fontSize: 30 }} />
                              </Box>
                              
                              {/* Video controls overlay */}
                              <Box
                                sx={{
                                  position: 'absolute',
                                  bottom: 0,
                                  left: 0,
                                  right: 0,
                                  background: 'linear-gradient(to top, rgba(0,0,0,0.7), transparent)',
                                  padding: 1,
                                  display: 'flex',
                                  justifyContent: 'space-between',
                                  alignItems: 'center'
                                }}
                              >
                                <IconButton 
                                  size="small" 
                                  color="inherit"
                                  onClick={() => togglePlayback(video.id)}
                                >
                                  {playingVideos[video.id] ? <PauseIcon /> : <PlayArrowIcon />}
                                </IconButton>
                                
                                <IconButton 
                                  size="small" 
                                  color="inherit"
                                  onClick={() => toggleMute(video.id)}
                                  sx={{ mr: 1 }}
                                >
                                  {mutedVideos[video.id] ? <VolumeOffIcon /> : <VolumeOnIcon />}
                                </IconButton>
                              </Box>
                            </Box>
                            
                            <Typography variant="caption" sx={{ mt: 1, display: 'block' }}>
                              {video.video_title || 'Untitled Video'}
                            </Typography>
                          </Grid>
                        ))}
                      </Grid>
                    </>
                  )}
                  
                  <Box sx={{ mt: 2, display: 'flex', justifyContent: 'flex-end' }}>
                    <Button
                      variant="contained"
                      color="primary"
                      onClick={() => navigate(`/jobs/${job.id}`)}
                    >
                      View Details
                    </Button>
                  </Box>
                </CardContent>
              </JobCard>
            ))}
          </TabPanel>
          
          {/* Videos Tab */}
          <TabPanel value={tabValue} index={2}>
            <Grid container spacing={3}>
              {videos.map((video) => renderVideoCard(video))}
            </Grid>
          </TabPanel>
          
          {/* Contact Tab */}
          <TabPanel value={tabValue} index={3}>
            <Grid container spacing={3}>
              <Grid item xs={12} md={6}>
                <Typography variant="h6" gutterBottom>
                  Contact Information
                </Typography>
                <List>
                  <ListItem>
                    <ListItemIcon>
                      <EmailIcon />
                    </ListItemIcon>
                    <ListItemText primary="Email" secondary={profile?.email} />
                  </ListItem>
                  <ListItem>
                    <ListItemIcon>
                      <PhoneIcon />
                    </ListItemIcon>
                    <ListItemText primary="Phone" secondary={profile?.phone} />
                  </ListItem>
                  <ListItem>
                    <ListItemIcon>
                      <LanguageIcon />
                    </ListItemIcon>
                    <ListItemText primary="Website" secondary={profile?.website} />
                  </ListItem>
                  <ListItem>
                    <ListItemIcon>
                      <LocationIcon />
                    </ListItemIcon>
                    <ListItemText primary="Location" secondary={profile?.location} />
                  </ListItem>
                </List>
              </Grid>
              <Grid item xs={12} md={6}>
                <Typography variant="h6" gutterBottom>
                  Social Media
                </Typography>
                <List>
                  <ListItem button component="a" href={profile?.social?.linkedin} target="_blank">
                    <ListItemIcon>
                      <LinkedInIcon />
                    </ListItemIcon>
                    <ListItemText primary="LinkedIn" secondary={profile?.social?.linkedin} />
                  </ListItem>
                  <ListItem button component="a" href={profile?.social?.facebook} target="_blank">
                    <ListItemIcon>
                      <FacebookIcon />
                    </ListItemIcon>
                    <ListItemText primary="Facebook" secondary={profile?.social?.facebook} />
                  </ListItem>
                  <ListItem button component="a" href={profile?.social?.twitter} target="_blank">
                    <ListItemIcon>
                      <TwitterIcon />
                    </ListItemIcon>
                    <ListItemText primary="Twitter" secondary={profile?.social?.twitter} />
                  </ListItem>
                </List>
              </Grid>
            </Grid>
          </TabPanel>
        </Paper>
      </Container>
    </ProfileContainer>
  );
};

export default EmployerProfile;